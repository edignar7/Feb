const CONFIG={partnerName:'Handsome',mediaUrl:'assets/images/sticker.gif'};const state={currentPhase:'intro',noButtonPhraseIndex:0,noButtonFrozen:false,mouseX:window.innerWidth/2,mouseY:window.innerHeight/2,noButtonX:0,noButtonY:0,nearMissTriggered:false,soundEnabled:false};const noButtonPhrases=['No','No way','You dont mean it','Thats not what you want','Think it through...','Hun seriously?','Be nice','Why are you like this','I trusted you...','Im gonna cry...'];const elements={};function cacheElements(){['introSection','videoWrapper','introMedia','typewriterSection','typewriterContent','mainInterface','questionText','nameText','yesBtn','noBtn','celebrationSection','sparkleContainer','floatingHearts','audioToggle','yesSparkles','videoSparkles','countdown','replayKissBtn','celebrationEmojis'].forEach(function(id){elements[id]=document.getElementById(id)})}function init(){cacheElements();setupMedia();createBackgroundSparkles();createFloatingHearts();createVideoSparkles();createYesButtonSparkles();setupEventListeners();initNoButtonPosition();startIntroSequence();requestAnimationFrame(animationLoop)}function setupMedia(){elements.nameText.textContent='Hey '+CONFIG.partnerName+'...';if(CONFIG.mediaUrl){elements.introMedia.src=CONFIG.mediaUrl}}function createBackgroundSparkles(){for(var i=0;i<50;i++){var sparkle=document.createElement('div');sparkle.className='sparkle';sparkle.style.left=Math.random()*100+'%';sparkle.style.top=Math.random()*100+'%';sparkle.style.animationDelay=Math.random()*3+'s';sparkle.style.animationDuration=(2+Math.random()*2)+'s';elements.sparkleContainer.appendChild(sparkle)}}function createFloatingHearts(){var hearts=['💕','💖','💗','💓','💝','❤️','🩷','🤍'];for(var i=0;i<15;i++){var heart=document.createElement('div');heart.className='floating-heart';heart.textContent=hearts[Math.floor(Math.random()*hearts.length)];heart.style.left=Math.random()*100+'%';heart.style.animationDelay=Math.random()*15+'s';heart.style.animationDuration=(12+Math.random()*8)+'s';heart.style.fontSize=(15+Math.random()*15)+'px';elements.floatingHearts.appendChild(heart)}}function createVideoSparkles(){var sparkles=['✨','💖','⭐','💕'];for(var i=0;i<8;i++){var sparkle=document.createElement('div');sparkle.className='video-sparkle';sparkle.textContent=sparkles[Math.floor(Math.random()*sparkles.length)];sparkle.style.left=Math.random()*100+'%';sparkle.style.top=Math.random()*100+'%';sparkle.style.animationDelay=Math.random()*2+'s';elements.videoSparkles.appendChild(sparkle)}}function createYesButtonSparkles(){var positions=[{left:'0%',top:'50%'},{left:'100%',top:'50%'},{left:'50%',top:'0%'},{left:'50%',top:'100%'},{left:'20%',top:'20%'},{left:'80%',top:'20%'},{left:'20%',top:'80%'},{left:'80%',top:'80%'}];positions.forEach(function(pos,i){var sparkle=document.createElement('div');sparkle.className='yes-sparkle';sparkle.textContent='✨';sparkle.style.left=pos.left;sparkle.style.top=pos.top;sparkle.style.animationDelay=(i*0.15)+'s';elements.yesSparkles.appendChild(sparkle)})}function createCursorHeart(x,y){var hearts=['💕','💖','💗','❤️','💓'];var heart=document.createElement('div');heart.className='cursor-heart';heart.textContent=hearts[Math.floor(Math.random()*hearts.length)];heart.style.left=(x+(Math.random()-0.5)*20)+'px';heart.style.top=(y+(Math.random()-0.5)*20)+'px';document.body.appendChild(heart);setTimeout(function(){heart.remove()},1500)}function startIntroSequence(){setTimeout(function(){elements.introSection.classList.add('hidden');startTypewriter()},3500)}function startTypewriter(){state.currentPhase='typewriter';elements.typewriterSection.classList.add('active');setTimeout(function(){typeText('Hey... wait a sec.')},0);setTimeout(function(){typeText('Ive been meaning to ask you something...')},2500);setTimeout(function(){elements.typewriterSection.classList.add('hidden');setTimeout(showMainInterface,800)},6000)}function typeText(text){elements.typewriterContent.textContent='';var i=0;var interval=setInterval(function(){if(i<text.length){elements.typewriterContent.textContent+=text.charAt(i);i++}else{clearInterval(interval)}},50)}function showMainInterface(){state.currentPhase='main';elements.mainInterface.classList.add('active');startNoButtonPhraseRotation()}function initNoButtonPosition(){state.noButtonX=window.innerWidth/2+120;state.noButtonY=window.innerHeight/2;updateNoButtonPosition()}function updateNoButtonPosition(){elements.noBtn.style.left=state.noButtonX+'px';elements.noBtn.style.top=state.noButtonY+'px';elements.noBtn.style.transform='translate(-50%,-50%)'}function moveNoButton(){if(state.currentPhase!=='main'||state.noButtonFrozen)return;var btn=elements.noBtn;var btnRect=btn.getBoundingClientRect();var btnCenterX=btnRect.left+btnRect.width/2;var btnCenterY=btnRect.top+btnRect.height/2;var dx=btnCenterX-state.mouseX;var dy=btnCenterY-state.mouseY;var distance=Math.sqrt(dx*dx+dy*dy);var escapeRadius=200;var nearMissRadius=60;if(distance<escapeRadius){if(distance<nearMissRadius&&!state.nearMissTriggered&&Math.random()<0.08){triggerNearMiss();return}var angle=Math.atan2(dy,dx);var escapeSpeed=Math.max(20,(escapeRadius-distance)/2.5);var randomAngle=angle+(Math.random()-0.5)*0.6;var newX=state.noButtonX+Math.cos(randomAngle)*escapeSpeed;var newY=state.noButtonY+Math.sin(randomAngle)*escapeSpeed;var padding=100;newX=Math.max(padding,Math.min(window.innerWidth-padding,newX));newY=Math.max(padding,Math.min(window.innerHeight-padding,newY));state.noButtonX=newX;state.noButtonY=newY;updateNoButtonPosition();if(Math.random()<0.08){btn.classList.add('panicking');setTimeout(function(){btn.classList.remove('panicking')},300)}}}function triggerNearMiss(){state.nearMissTriggered=true;state.noButtonFrozen=true;elements.noBtn.classList.add('frozen');setTimeout(function(){var escapeAngle=Math.random()*Math.PI*2;state.noButtonX+=Math.cos(escapeAngle)*250;state.noButtonY+=Math.sin(escapeAngle)*250;state.noButtonX=Math.max(100,Math.min(window.innerWidth-100,state.noButtonX));state.noButtonY=Math.max(100,Math.min(window.innerHeight-100,state.noButtonY));updateNoButtonPosition();elements.noBtn.textContent='EXCUSE YOU???';elements.noBtn.classList.remove('frozen');state.noButtonFrozen=false;setTimeout(function(){elements.noBtn.textContent=noButtonPhrases[state.noButtonPhraseIndex];state.nearMissTriggered=false},1500)},200)}function startNoButtonPhraseRotation(){setInterval(function(){if(state.currentPhase!=='main')return;state.noButtonPhraseIndex=(state.noButtonPhraseIndex+1)%noButtonPhrases.length;elements.noBtn.style.opacity='0';setTimeout(function(){elements.noBtn.textContent=noButtonPhrases[state.noButtonPhraseIndex];elements.noBtn.style.opacity='1'},300)},5000)}function checkQuestionReaction(){var yesRect=elements.yesBtn.getBoundingClientRect();var noRect=elements.noBtn.getBoundingClientRect();var distToYes=Math.sqrt(Math.pow(state.mouseX-(yesRect.left+yesRect.width/2),2)+Math.pow(state.mouseY-(yesRect.top+yesRect.height/2),2));var distToNo=Math.sqrt(Math.pow(state.mouseX-(noRect.left+noRect.width/2),2)+Math.pow(state.mouseY-(noRect.top+noRect.height/2),2));if(distToYes<150){elements.questionText.classList.add('glow');elements.questionText.classList.remove('shake')}else if(distToNo<150){elements.questionText.classList.add('shake');elements.questionText.classList.remove('glow')}else{elements.questionText.classList.remove('glow','shake')}}function triggerCelebration(){state.currentPhase='celebration';elements.celebrationSection.classList.add('active');var emojis=['❤️','💖','😍','🥰','💘','💕','💗','💓','💝','✨','🎉','💐'];for(var i=0;i<60;i++){(function(i){setTimeout(function(){createCelebrationEmoji(emojis[Math.floor(Math.random()*emojis.length)])},i*50)})(i)}for(var j=0;j<100;j++){(function(j){setTimeout(createConfetti,j*30)})(j)}startValentineCountdown();history.pushState(null,null,location.href);window.addEventListener('popstate',function(){history.pushState(null,null,location.href)})}function createCelebrationEmoji(emoji){var element=document.createElement('div');element.className='celebration-emoji';element.textContent=emoji;element.style.left=Math.random()*100+'%';element.style.top='50%';element.style.animationDuration=(2+Math.random()*2)+'s';element.style.fontSize=(20+Math.random()*30)+'px';elements.celebrationEmojis.appendChild(element);setTimeout(function(){element.remove()},4000)}function createConfetti(){var colors=['#ff6b6b','#ff8fab','#ffd93d','#6bcb77','#4d96ff','#ff6b9d'];var confetti=document.createElement('div');confetti.className='confetti';confetti.style.left=Math.random()*100+'%';confetti.style.top='-20px';confetti.style.background=colors[Math.floor(Math.random()*colors.length)];confetti.style.width=(5+Math.random()*10)+'px';confetti.style.height=(10+Math.random()*15)+'px';confetti.style.borderRadius=Math.random()>0.5?'50%':'2px';confetti.style.animationDuration=(3+Math.random()*2)+'s';elements.celebrationEmojis.appendChild(confetti);setTimeout(function(){confetti.remove()},5000)}function startValentineCountdown(){function update(){var valentine=new Date('2025-02-14T00:00:00');var now=new Date();var diff=valentine-now;if(diff>0){var days=Math.floor(diff/(1000*60*60*24));var hours=Math.floor((diff%(1000*60*60*24))/(1000*60*60));var minutes=Math.floor((diff%(1000*60*60))/(1000*60));elements.countdown.innerHTML=days+' days, '+hours+' hours, '+minutes+' minutes until Valentines Day!'}else{elements.countdown.innerHTML='Happy Valentines Day!'}}update();setInterval(update,60000)}function setupEventListeners(){document.addEventListener('mousemove',function(e){state.mouseX=e.clientX;state.mouseY=e.clientY;if(state.currentPhase==='main'){checkQuestionReaction();if(Math.random()<0.03){createCursorHeart(e.clientX,e.clientY)}}});document.addEventListener('touchmove',function(e){var touch=e.touches[0];state.mouseX=touch.clientX;state.mouseY=touch.clientY;if(state.currentPhase==='main'){checkQuestionReaction()}},{passive:true});elements.yesBtn.addEventListener('click',triggerCelebration);elements.noBtn.addEventListener('click',function(e){e.preventDefault();state.noButtonX=Math.random()*(window.innerWidth-200)+100;state.noButtonY=Math.random()*(window.innerHeight-200)+100;updateNoButtonPosition();elements.noBtn.textContent='Nice try!';setTimeout(function(){elements.noBtn.textContent=noButtonPhrases[state.noButtonPhraseIndex]},1000)});elements.noBtn.addEventListener('touchstart',function(e){e.preventDefault()});elements.replayKissBtn.addEventListener('click',function(){for(var i=0;i<15;i++){(function(i){setTimeout(function(){createCelebrationEmoji('💋')},i*100)})(i)}});elements.audioToggle.addEventListener('click',function(){state.soundEnabled=!state.soundEnabled;elements.audioToggle.textContent=state.soundEnabled?'🔊':'🔇'});window.addEventListener('resize',function(){state.noButtonX=Math.min(state.noButtonX,window.innerWidth-100);state.noButtonY=Math.min(state.noButtonY,window.innerHeight-100);updateNoButtonPosition()})}function animationLoop(){if(state.currentPhase==='main'){moveNoButton()}requestAnimationFrame(animationLoop)}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',init)}else{init()}
